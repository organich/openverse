import{_ as A}from"./Dypy9b3o.js";import{w as f,a as h,v as M}from"./DEfBnNKa.js";import{o as E}from"./DCwVccl7.js";import{u as N}from"./CJ8GM9HO.js";import{V as O}from"./Djb8mEXk.js";import{_ as z}from"./BpX2zK57.js";import{_ as D}from"./YWxkmePE.js";import{d as L,V as P,A as b,N as i,T as q,D as H,J,L as t,P as v,R as Q,I as o,K as w,M as T,Q as U,H as j}from"./D36rSpla.js";const te=L({inheritAttrs:!1,__name:"VSearchBar",props:{modelValue:{default:""},placeholder:{}},emits:["update:modelValue","submit","recent-hidden"],setup(x,{emit:y}){const _=x,a=y,V=P(),u=b(null),m=b(null),r=i({get:()=>_.modelValue??"",set:e=>{a("update:modelValue",e)}}),g=()=>{a("submit")},S=i(()=>"top-14"),C=()=>{var e;(e=m.value)==null||e.focusInput()},K=()=>{p.value.length||n()},{handleKeydown:B,handleSelect:R,handleClear:$,recent:{show:k,hide:n,isVisible:l,selectedIdx:c,entries:p}}=N({focusInput:C,term:r,isMobile:!1});E(u,n),q(l,e=>{e||a("recent-hidden")});const F=i(()=>{const{class:e,...s}=V;return s});return(e,s)=>{const I=A;return T(),H("div",{ref_key:"searchBarEl",ref:u,class:w(["relative",e.$attrs.class])},[J("form",{action:"/search",role:"search",class:"search-bar group flex h-12 flex-row items-center rounded-sm border-tx bg-default",onSubmit:h(g,["prevent"])},[t(O,Q({ref_key:"inputFieldRef",ref:m},F.value,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=d=>r.value=d),placeholder:e.placeholder||e.$t("hero.search.placeholder"),class:"search-field flex-grow border-tx bg-secondary text-secondary focus-within:bg-default focus:border-focus group-hover:bg-secondary group-hover:text-default group-hover:focus-within:bg-default","label-text":e.$t("search.searchBarLabel",{openverse:"Openverse"}),"connection-sides":["end"],"field-id":"search-bar",type:"search",autocomplete:"off",name:"q",role:"combobox","aria-autocomplete":"none","aria-expanded":o(l),"aria-controls":"recent-searches-list","aria-activedescendant":o(c)!==void 0?`option-${o(c)}`:void 0,onFocus:o(k),onKeydown:o(B)}),{default:v(()=>[U(e.$slots,"default")]),_:3},16,["modelValue","placeholder","label-text","aria-expanded","aria-activedescendant","onFocus","onKeydown"]),t(z,{type:"submit",route:"search",onKeydown:f(h(K,["exact"]),["tab"])},null,8,["onKeydown"])],32),t(I,null,{default:v(()=>[j(t(D,{"selected-idx":o(c),entries:o(p),class:w(["absolute inset-x-0 z-popover lg:flex",S.value]),onSelect:o(R),onClear:s[1]||(s[1]=d=>o($)(d)),onKeydown:f(o(n),["tab"])},null,8,["selected-idx","entries","class","onSelect","onKeydown"]),[[M,o(l)]])]),_:1})],2)}}});export{te as _};
